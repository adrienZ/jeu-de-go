<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type='text/css' href="/styles/style.css">


    <title>go game</title>

</head>




<body>
    <!--
<div class="intro">
<form action="post">
<label for="getPseudo"></label>
<input type="text" name='getPseudo' id='getPseudo' autofocus >
</form>  
</div>
-->

    <div class="game">




        <h1> Jeu de Go </h1>
        <script type="text/javascript" src="/scripts/main.js"></script>
        <button id='save' value=save onclick=save();>SAVE</button>



        <div id="console"></div>

        <div class="chacha">
            <form action="/" method="post" id="formulaire_chat">
                <input type="text" name="message" id="message" placeholder="Votre message..." autofocus />
                <input type="submit" id="envoi_message" value="Envoyer" />
            </form>

            <section id="zone_chat">

            </section>

        </div>

        <script type='text/javascript' src='/scripts/FileSaver.min.js'></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>


    </div>

    <script>
        // Connexion à socket.io
        var socket = io.connect('http://localhost:8080');

        // On demande le pseudo, on l'envoie au serveur et on l'affiche dans le titre
        var pseudo = prompt('Quel est votre pseudo ?');
        socket.emit('nouveau_client', pseudo);
        document.title = pseudo + ' - ' + document.title;

        // Quand on reçoit un message, on l'insère dans la page
        socket.on('message', function (data) {
            insereMessage(data.pseudo, data.message)
        })

        // Quand un nouveau client se connecte, on affiche l'information
        socket.on('nouveau_client', function (pseudo) {
            $('#zone_chat').append('<p><em>' + pseudo + ' a rejoint le Chat !</em></p>');
        })

        // Lorsqu'on envoie le formulaire, on transmet le message et on l'affiche sur la page
        $('#formulaire_chat').submit(function () {
            var message = $('#message').val();
            socket.emit('message', message); // Transmet le message aux autres
            insereMessage(pseudo, message); // Affiche le message aussi sur notre page
            $('#message').val('').focus(); // Vide la zone de Chat et remet le focus dessus
            return false; // Permet de bloquer l'envoi "classique" du formulaire
        });

        // Ajoute un message dans la page
        function insereMessage(pseudo, message) {
            $('#zone_chat').append('<p><strong>' + pseudo + '</strong> ' + message + '</p>');
        }
    </script>
</body>

</html>